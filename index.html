<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Kanby</title>
	
	<!-- PWA Meta Tags -->
	<meta name="description" content="Simple and beautiful task management app" />
	<meta name="theme-color" content="#e74c3c" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="default" />
	<meta name="apple-mobile-web-app-title" content="Kanby" />
	<meta name="mobile-web-app-capable" content="yes" />
	<meta name="msapplication-TileColor" content="#e74c3c" />
	<meta name="msapplication-config" content="/browserconfig.xml" />
	
	<!-- PWA Manifest -->
	<link rel="manifest" href="/manifest.json" />
	
	<!-- Apple Touch Icons -->
	<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><circle cx='67.5' cy='112.5' r='45' fill='%23e74c3c' stroke='%23c0392b' stroke-width='5.625'/><circle cx='112.5' cy='112.5' r='45' fill='%23e74c3c' stroke='%23c0392b' stroke-width='5.625'/><path d='M 67.5 67.5 Q 90 45 112.5 67.5' stroke='%232d5a27' stroke-width='11.25' fill='none' stroke-linecap='round'/><ellipse cx='90' cy='45' rx='22.5' ry='11.25' fill='%2327ae60' stroke='%232d5a27' stroke-width='2.8125'/><circle cx='56.25' cy='101.25' r='11.25' fill='%23ff6b6b' opacity='0.7'/><circle cx='101.25' cy='101.25' r='11.25' fill='%23ff6b6b' opacity='0.7'/></svg>" />
	<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><circle cx='12' cy='20' r='8' fill='%23e74c3c' stroke='%23c0392b' stroke-width='1'/><circle cx='20' cy='20' r='8' fill='%23e74c3c' stroke='%23c0392b' stroke-width='1'/><path d='M 12 12 Q 16 8 20 12' stroke='%232d5a27' stroke-width='2' fill='none' stroke-linecap='round'/><ellipse cx='16' cy='8' rx='4' ry='2' fill='%2327ae60' stroke='%232d5a27' stroke-width='0.5'/><circle cx='10' cy='18' r='2' fill='%23ff6b6b' opacity='0.7'/><circle cx='18' cy='18' r='2' fill='%23ff6b6b' opacity='0.7'/></svg>" />
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Press+Start+2P&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="styles.css" />
</head>
<body data-require-auth="true">
	<header class="app-header" role="banner">
		<div class="brand">
			<div class="logo" aria-hidden="true">üçí</div>
			<h1>Kanby</h1>
		</div>
		<nav class="controls" aria-label="Global controls">
			<div class="board-switcher">
				<label for="boardSelect" class="sr-only">Select board</label>
				<select id="boardSelect" aria-label="Select board"></select>
				<button id="newBoardBtn" title="New board" aria-label="Create new board">Ôºã</button>
				<button id="renameBoardBtn" title="Rename board" aria-label="Rename current board">‚úé</button>
				<button id="deleteBoardBtn" title="Delete board" aria-label="Delete current board">üóë</button>
			</div>

			<div class="actions">
				<div class="dropdown" id="filtersDropdown">
					<button id="filtersToggle" aria-haspopup="true" aria-expanded="false" title="Filters">Filters ‚ñæ</button>
					<div class="menu-panel" role="menu" aria-label="Filters" hidden>
						<div class="filters">
							<input id="searchInput" type="search" placeholder="/ Search tasks‚Ä¶" aria-label="Search tasks" />
							<select id="filterPriority" aria-label="Filter by priority">
								<option value="">Priority</option>
								<option value="high">High</option>
								<option value="medium">Medium</option>
								<option value="low">Low</option>
							</select>
							<select id="filterCategory" aria-label="Filter by category">
								<option value="">Category</option>
							</select>
							<select id="sortBy" aria-label="Sort tasks">
								<option value="">Sort</option>
								<option value="dueAsc">Due date ‚Üë</option>
								<option value="dueDesc">Due date ‚Üì</option>
								<option value="priority">Priority</option>
								<option value="title">Title</option>
							</select>
						</div>
					</div>
				</div>

				<button id="addTaskBtn" class="primary" title="N">Add Task</button>

				<div class="dropdown" id="exportDropdown">
					<button id="exportToggle" aria-haspopup="true" aria-expanded="false" title="Export">Export ‚ñæ</button>
					<div class="menu-panel" role="menu" aria-label="Export actions" hidden>
						<button id="exportPdfBtn" title="Export PDF">Export PDF</button>
						<button id="exportBtn" title="Export JSON">Export JSON</button>
					</div>
				</div>

				<div class="dropdown" id="moreDropdown">
					<button id="moreToggle" aria-haspopup="true" aria-expanded="false" title="More">More ‚ñæ</button>
					<div class="menu-panel" role="menu" aria-label="More actions" hidden>
						<label for="importInput" class="import-label" title="Import JSON">Import JSON</label>
						<input id="importInput" type="file" accept="application/json" hidden />
						<button id="syncBtn" title="Cloud sync (stub)">Sync</button>
						<button id="helpBtn" title="Help / Onboarding">Help</button>
						<button id="signoutBtn" title="Sign out">Sign out</button>
					</div>
				</div>
			</div>
		</nav>
	</header>

	<main id="board" class="board" role="main" aria-live="polite">
		<section class="column" data-column="todo" aria-label="To Do">
			<header>
				<h2>To Do</h2>
				<span class="count" aria-live="polite"></span>
				<button class="quick-add" data-target="todo" title="Quick add to To Do">Ôºã</button>
			</header>
			<div class="column-drop" data-column="todo" aria-label="To Do drop zone" tabindex="0"></div>
		</section>
		<section class="column" data-column="inprogress" aria-label="In Progress">
			<header>
				<h2>In Progress</h2>
				<span class="count" aria-live="polite"></span>
				<button class="quick-add" data-target="inprogress" title="Quick add to In Progress">Ôºã</button>
			</header>
			<div class="column-drop" data-column="inprogress" aria-label="In Progress drop zone" tabindex="0"></div>
		</section>
		<section class="column" data-column="done" aria-label="Done">
			<header>
				<h2>Done</h2>
				<span class="count" aria-live="polite"></span>
				<button class="quick-add" data-target="done" title="Quick add to Done">Ôºã</button>
			</header>
			<div class="column-drop" data-column="done" aria-label="Done drop zone" tabindex="0"></div>
		</section>
	</main>

	<!-- Task Modal -->
	<div id="taskModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="taskModalTitle" hidden>
		<div class="modal-content">
			<header class="modal-header">
				<h3 id="taskModalTitle">Task</h3>
				<button class="close" id="closeTaskModal" aria-label="Close">‚úï</button>
			</header>
			<form id="taskForm">
				<input type="hidden" id="taskId" />
				<input type="hidden" id="taskStatusSeed" />
				<label>Title<input id="taskTitle" required maxlength="120" /></label>
				<label>Description<textarea id="taskDescription" rows="4"></textarea></label>
				<div class="row">
					<label>Priority
						<select id="taskPriority">
							<option value="low">Low</option>
							<option value="medium" selected>Medium</option>
							<option value="high">High</option>
						</select>
					</label>
					<label>Due Date<input id="taskDue" type="date" /></label>
					<label>Category<input id="taskCategory" placeholder="e.g. Work" /></label>
				</div>
				<footer class="modal-footer">
					<button type="submit" class="primary" id="saveTaskBtn">Save</button>
					<button type="button" id="deleteTaskBtn" class="danger">Delete</button>
				</footer>
			</form>
		</div>
	</div>

	<!-- Onboarding -->
	<div id="onboarding" class="onboarding" hidden>
		<div class="onboarding-card">
			<h3>Welcome to Kanby</h3>
			<ul>
				<li>Press N to create a new task.</li>
				<li>Press / to focus search.</li>
				<li>Drag cards between columns to update status.</li>
				<li>Create multiple boards from the top left.</li>
			</ul>
			<div class="onboarding-actions">
				<button id="onboardingDismiss" class="primary">Get started</button>
			</div>
		</div>
	</div>

	<!-- SR-only utility class -->
	<div class="sr-only" aria-hidden="true"></div>

	<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
	<script>
		window.SUPABASE_URL = "https://laubhgykjzgnpwfazosa.supabase.co";
		window.SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxhdWJoZ3lranpnbnB3ZmF6b3NhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMDI2MzYsImV4cCI6MjA3MTg3ODYzNn0._Wf4_dILdJZI1zq1c81ay4i8NE44iM7KAn8CV9TWVX0";
	</script>
	<script src="auth.js" defer></script>
	<script src="app.js" defer></script>
	
	<!-- PWA Service Worker Registration -->
	<script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('/sw.js')
					.then((registration) => {
						console.log('SW registered: ', registration);
					})
					.catch((registrationError) => {
						console.log('SW registration failed: ', registrationError);
					});
			});
		}
	</script>
</body>
</html> 